<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>공지사항 - NURIINFOS</title>

    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css"
        rel="stylesheet">
    <link href="/css/common.css" rel="stylesheet" type="text/css">
    <link href="/css/sub.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="/css/nav-style.css">
    <script src="/js/jquery-1.10.1.min.js" type="text/javascript"></script>
    <meta name="GENERATOR" content="MSHTML 11.00.10570.1001">
</head>

<body>
    <!-- 공통 네비게이션 포함 -->
    <%- include('../layout/nav.html') %>

        <!-- 히어로 섹션 -->
        <section class="history-hero notice">
            <div class="history-hero-content">
                <h2 class="hero-label">공지사항 </h2>
                <h1 class="hero-title">기술의 중심에서 전하는 깊이 있는 정보, <br>누리인포스의 소식을 만나보세요.</h1>
            </div>
            <div class="scroll-down">
                <span>Scroll Down</span>
                <div class="arrow"></div>
            </div>
        </section>

        <section class="inquiry">
            <div class="inquiry-container">
                <div class="inquiry-header">
                    <h2 class="inquiry-title">공지사항 </h2>
                    <p class="inquiry-subtitle">솔루션 업데이트와 공식 소식을 통해 누리인포스의 최신 행보를 공유합니다.</p>
                </div>
            </div>
        </section>

        <section class="casestudy">
            <div class="casestudy-info">
                <div class="search_area">
                    <div class="gnb_etc_service on active">
                        <select id="b_category" name="b_category">
                            <option value="" selected="">전체</option>
                            <option value="1">Solution</option>
                            <option value="2">Service</option>
                            <option value="3">Industries</option>
                            <option value="4">채용</option>
                            <option value="5">누리인포스</option>
                        </select>
                    </div>
                    <div class="input_search abClear">
                        <input type="search" title="검색어입력" name="search_text" id="search_text" value=""
                            placeholder="검색어를 입력하세요">
                    </div>
                    <span id="search" class="btn">검색</span>
                </div>
                <div class="contact pt0">
                    <table cellspacing="0" summary="Anyworks®PRM 구축사례" class="tb_type2 news mt15">
                        <caption>누리소식</caption>
                        <colgroup>
                            <col width="15%">
                            <col>
                            <col width="20%">
                        </colgroup>
                        <thead>
                            <tr>
                                <th scope="col">번호</th>
                                <th scope="col">제목</th>
                                <th scope="col">등록일</th>
                            </tr>
                        </thead>
                        <tbody id="data_body" class="notice-list"></tbody>
                    </table>
                    <div class="paging">
                        <div class="paging_inner"></div>
                        <div class="btn2 pw_open">글쓰기</div>
                    </div>
                </div>
            </div>
        </section>
        <div class="layer_popup_area take_over">
            <div class="layer_popup2">
                <div class="popup_close"><img src="/images/btn_close_popup.png"></div>
                <div class="layer_info">
                    <form name="wform" method="post">
                        <div class="tit">누리인포스 관리자님<br>비밀번호를 입력하세요.</div>
                        <input type="password" name="w_passwd" id="w_passwd">
                        <input type="hidden" name="b_id" id="b_id">
                        <div class="btn2 popup_close">확인</div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Footer Section (Wrapped for styling match with Index) -->
        <div id="footer-section">
            <%- include('../layout/footer.html') %>
        </div>

        <script src="/js/sub.js" type="text/javascript"></script>
        <script>

            $(function () {
                search_data('1');

                $(".pw_open").click(function () {
                    $(".take_over").css(
                        "display", "block");
                });

                $(".popup_close").click(function () {
                    $(".take_over").css(
                        "display", "none");

                    save();
                });

                $("#search").click(function () {
                    search_data('1');
                    //location.href = "/bbs/list?search_text="+$("#search_text").val()+"&b_category="+$("#b_category").val();
                });
            });

            function search_data(page) {
                $.ajax({
                    url: '/bbs/list',
                    dataType: 'json',
                    type: 'GET',
                    data: {
                        "search_text": $("#search_text").val(),
                        "b_category": $("#b_category").val(),
                        "b_page": page
                    },
                    success: function (result) {
                        $("#data_body").empty();
                        $(".paging_inner").empty();

                        if (result.BBS_LIST.length > 0) {
                            var results = result.BBS_LIST;
                            var str = '<tr>';
                            $.each(results, function (i) {
                                str += '<td class="point">'
                                    + "<a href='/bbs/notice/view?b_id=" + results[i].b_id + "'>" + results[i].b_id + '</a></td><td>'
                                    + "<a href='/bbs/notice/view?b_id=" + results[i].b_id + "'>" + results[i].b_subject + '</td><td>'
                                    + "<a href='/bbs/notice/view?b_id=" + results[i].b_id + "'>" + results[i].b_date + '</td>'
                                str += '</tr>';
                            });
                            $("#data_body").html(str);

                            //paging
                            str = "";
                            var curPage = Number(result.currentPage);
                            var totalPage = result.pageCount;
                            var startPage = result.pages[0].number;
                            var endPage = result.pageCount;
                            var itemCount = result.itemCount;

                            if (curPage > 0 && itemCount > 0) {
                                var currentPage = curPage <= 1 ? 1 : (curPage - 1);
                                str += "<a href='javascript:search_data(" + currentPage + ")' class='prev'><span class='sr-only'>이전 페이지</span></a>";
                            }
                            for (var i = startPage; i <= endPage; i++) {
                                if (i > totalPage) { break; }

                                if (i == curPage) {
                                    str += "<a href='javascript:search_data(" + i + ")' class='current num'>" + i + "</a>";
                                } else {
                                    str += "<a href='javascript:search_data(" + i + ")' class='num'>" + i + "</a>";
                                }
                            } //for
                            if (curPage <= totalPage) {
                                var nextPage = (curPage >= totalPage) ? totalPage : (curPage + 1);
                                str += "<a href='javascript:search_data(" + nextPage + ")' class='next'><span class='sr-only'>다음 페이지</span></a>";
                            }
                            $(".paging_inner").append(str);
                        }
                    }
                });
            }

            function save() {
                var f = document.wform;
                f.action = "/auth/check/notice";
                f.method = "post";
                f.submit();
                $("#w_passwd").val("");
            }

        </script>
</body>

</html>