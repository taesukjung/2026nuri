<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>구축사례 - NURIINFOS</title>

    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css"
        rel="stylesheet">
    <link href="/css/common.css" rel="stylesheet" type="text/css">
    <link href="/css/sub.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="/css/nav-style.css">
    <script src="/js/jquery-1.10.1.min.js" type="text/javascript"></script>
    <meta name="GENERATOR" content="MSHTML 11.00.10570.1001">
</head>

<body>
    <!-- 공통 네비게이션 포함 -->
    <%- include('../layout/nav.html') %>

        <!-- 히어로 섹션 -->
        <section class="history-hero casestudy">
            <div class="history-hero-content">
                <h2 class="hero-label">구축사례</h2>
                <h1 class="hero-title">경험으로 증명하고 결과로 답합니다.<br>누리인포스가 완성한 성공의 기록들</h1>
            </div>
            <div class="scroll-down">
                <span>Scroll Down</span>
                <div class="arrow"></div>
            </div>
        </section>

        <section class="inquiry">
            <div class="inquiry-container">
                <div class="inquiry-header">
                    <h2 class="inquiry-title">구축사례 </h2>
                    <p class="inquiry-subtitle">성공적인 프로젝트를 위해 누리인포스가 함께 있습니다.</p>
                </div>
            </div>
        </section>

        <section class="casestudy">
            <div class="casestudy-info">
                <form name="wform">
                    <table cellspacing="0" summary="Anyworks®PRM 구축사례" class="tb_type2 mt15 write">
                        <caption>구축사례</caption>
                        <colgroup>
                            <col width="15%">
                            <col width="15%">
                            <col width="15%">
                            <col>
                        </colgroup>
                        <thead>
                            <tr>
                                <th scope="col">년도</th>
                                <th scope="col">업종</th>
                                <th scope="col">고객사</th>
                                <th scope="col">프로젝트</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="text" title="날짜" name="b_date" id="b_date" value="" placeholder="년도"
                                        class=""></td>
                                <td>
                                    <select id="b_sector" name="b_sector" class="">
                                        <option value="1" selected="">제조/유통</option>
                                        <option value="2">금융</option>
                                        <option value="3">서비스</option>
                                        <option value="4">공공</option>
                                    </select>
                                </td>
                                <td><input type="text" title="고객사" id="b_client" name="b_client" value=""
                                        placeholder="고객사" class=""></td>
                                <td>
                                    <input type="text" title="프로젝트명" id="b_text" name="b_text" value=""
                                        placeholder="프로젝트명" class="">
                                    <input type="hidden" id="b_category" name="b_category">
                                    <input type="hidden" id="b_id" name="b_id" value="<%=b_id%>">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </form>
                <div class="btn_area">
                    <span><a href="/move/archive/casestudy.html" class="line">목록</a></span>
                    <span class="fr"><a href="javascript:save();">저장</a></span>
                    <span class="fr" id="btn_del"><a href="javascript
                        :del();" class="line">삭제</a></span>
                </div>
            </div>
        </section>

        <!-- Footer Section (Wrapped for styling match with Index) -->
        <div id="footer-section">
            <%- include('../layout/footer.html') %>
        </div>

        <script src="/js/sub.js" type="text/javascript"></script>
        <script>
            $(function () {
                if ($("#b_id").val() != "") {
                    $.ajax({
                        url: '/ref/getContent',
                        dataType: 'json',
                        type: 'GET',
                        data: {
                            "b_id": $("#b_id").val()
                        },
                        success: function (result) {

                            $("#b_category").val(result.REF_LIST[0].b_category);
                            $("#b_date").val(result.REF_LIST[0].b_date);
                            $("#b_sector").val(result.REF_LIST[0].b_sector);
                            $("#b_client").val(result.REF_LIST[0].b_client);
                            $("#b_text").val(result.REF_LIST[0].b_text);

                            $("li a[href='a']").removeClass("on")
                            $("#category_" + result.REF_LIST[0].b_category).addClass("on");
                        }
                    });
                } else {
                    $("#b_category").val("1");
                    $("#btn_del").hide();
                }

                $('ul#b_category_ul li a').click(function (e) {
                    var id = $(this).attr("id");
                    $("li a[href='a']").removeClass("on")
                    $("#" + id).addClass("on");

                    var arr = id.split("_");
                    $("#b_category").val(arr[1]);
                });
            });

            function save() {
                var data = validator();
                if (!data.flag) {
                    alert(data.msg);
                    return;
                }

                var f = document.wform;
                f.action = $("#b_id").val() == "" ? "/ref/insert" : "/ref/update";
                f.method = "post";
                f.submit();
            }

            function del() {
                if (confirm("삭제하시겠습니까?")) {
                    var f = document.wform;
                    f.action = "/ref/delete"
                    f.method = "post";
                    f.submit();
                } else {
                    return;
                }
            }

            function validator() {
                var data = {};
                var flag = true;
                var msg = "";

                if ($.trim($("#b_date").val()) == "")
                    msg = "날짜는 필수입력 값 입니다.";
                if ($.trim($("#b_sector").val()) == "")
                    msg = "업종은 필수입력 값 입니다.";
                if ($.trim($("#b_client").val()) == "")
                    msg = "고객사는 필수입력 값 입니다.";
                if ($.trim($("#b_text").val()) == "")
                    msg = "프로젝트는 필수입력 값 입니다.";

                data.flag = msg != "" ? flag = false : true;
                data.msg = msg;

                return data;
            }
        </script>

</body>

</html>